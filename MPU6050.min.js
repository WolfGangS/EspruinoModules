function b(a,c){this.i2c=a;this.addr=void 0===c||!1===c?d.ADDRESS_AD0_LOW:!0===c?d.ADDRESS_AD0_HIGH:c;this.initialize()}var d={ADDRESS_AD0_LOW:104,ADDRESS_AD0_HIGH:105,PWR1_CLKSEL_BIT:2,PWR1_CLKSEL_LENGTH:3,PWR1_SLEEP_BIT:6,CLOCK_INTERNAL:0,CLOCK_PLL_XGYRO:1,CLOCK_PLL_YGYRO:2,CLOCK_PLL_ZGYRO:3,CLOCK_PLL_EXT32K:4,CLOCK_PLL_EXT19M:5,CLOCK_KEEP_RESET:7,GYRO_FS_250:0,GYRO_FS_500:1,GYRO_FS_1000:2,GYRO_FS_2000:3,GCONFIG_FS_SEL_BIT:4,GCONFIG_FS_SEL_LENGTH:2,ACONFIG_AFS_SEL_BIT:4,ACONFIG_AFS_SEL_LENGTH:2,
ACCEL_FS_2:0,ACCEL_FS_4:1,ACCEL_FS_8:2,ACCEL_FS_16:3,PWR1_DEVICE_RESET_BIT:7,DMP_MEMORY_CHUNK_SIZE:16,TC_PWR_MODE_BIT:7,TC_OFFSET_BIT:6,TC_OFFSET_LENGTH:6,TC_OTP_BNK_VLD_BIT:0,USERCTRL_I2C_MST_EN_BIT:5,USERCTRL_I2C_MST_RESET_BIT:1};exports.connect=function(a,c){return new b(a,c)};b.prototype.initialize=function(){this.setClockSource(d.CLOCK_PLL_XGYRO);this.setFullScaleAccelRange(d.ACCEL_FS_2);this.setFullScaleGyroRange(d.GYRO_FS_250);this.setSleepEnabled(!1)};b.prototype.reset=function(){this.writeBit(107,
d.PWR1_DEVICE_RESET_BIT,!0)};b.prototype.readBytes=function(a,c){this.i2c.writeTo(this.addr,a);return this.i2c.readFrom(this.addr,c)};b.prototype.writeBytes=function(a,c){this.i2c.writeTo(this.addr,[a].concat(c))};b.prototype.readBit=function(a,c){return this.readBytes(a,1)[0]&1<<c};b.prototype.writeBit=function(a,c,b){var d=this.readBytes(a,1)[0];this.writeBytes(a,0!=b?d|1<<c:d&~(1<<c))};b.prototype.readBits=function(a,c,b){a=this.readBytes(a,1)[0];return(a&(1<<b)-1<<c-b+1)>>c-b+1};b.prototype.writeBits=
function(a,c,b,d){var g=this.readBytes(a,1)[0],h=(1<<b)-1<<c-b+1,g=g&~h|d<<c-b+1&h;this.writeBytes(a,g)};b.prototype.readS16=function(a){this.i2c.writeTo(this.addr,a);a=this.i2c.readFrom(this.addr,2);a=a[0]<<8|a[1];return 32767<=a?a-65536:a};b.prototype.readSXYZ=function(a){this.i2c.writeTo(this.addr,a);var c=this.i2c.readFrom(this.addr,6);a=c[0]<<8|c[1];var b=c[2]<<8|c[3],c=c[4]<<8|c[5];return[32767<=a?a-65536:a,32767<=b?b-65536:b,32767<=c?c-65536:c]};b.prototype.setClockSource=function(a){this.writeBits(107,
d.PWR1_CLKSEL_BIT,d.PWR1_CLKSEL_LENGTH,a)};b.prototype.setFullScaleAccelRange=function(a){this.writeBits(28,d.ACONFIG_AFS_SEL_BIT,d.ACONFIG_AFS_SEL_LENGTH,a);this.acc_lsb_sens=Math.pow(2,14-a)};b.prototype.setFullScaleGyroRange=function(a){this.writeBits(27,d.GCONFIG_FS_SEL_BIT,d.GCONFIG_FS_SEL_LENGTH,a);this.gyro_lsb_sens=131/Math.pow(2,a)};b.prototype.setSleepEnabled=function(a){this.writeBit(107,d.PWR1_SLEEP_BIT,a)};b.prototype.getRotation=function(){return this.readSXYZ(67)};b.prototype.getDegreesPerSecond=
function(){var a=this;return this.getRotation().map(function(c){return c/a.gyro_lsb_sens})};b.prototype.getAcceleration=function(){return this.readSXYZ(59)};b.prototype.getGravity=function(){var a=this;return this.getAcceleration().map(function(c){return c/a.acc_lsb_sens})};b.prototype.getTemperature=function(){return this.readS16(65)/340+36.53};b.prototype.setMemoryBank=function(a,c,b){a&=31;(void 0===b?0:b)&&(a|=32);(void 0===c?0:c)&&(a|=64);this.writeBytes(109,a)};b.prototype.setMemoryStartAddress=
function(a){this.writeBytes(110,a)};b.prototype.writeMemoryBlock=function(a,b,f){this.setMemoryBank(b);this.setMemoryStartAddress(f);for(var e,g=a.length,h=0;h<g;){e=d.DMP_MEMORY_CHUNK_SIZE;h+e>g&&(e=g-h);e>256-f&&(e=256-f);var k=a.slice(h,h+e);this.writeBytes(111,k);this.setMemoryBank(b);this.setMemoryStartAddress(f);var l=this.readBytes(111,e);if(l.toString()!=k.toString())return console.log("WriteMemoryBlock FAILED for bank: "+b+" / address: "+f+" / chunkSize: "+e+" / dataSize: "+g+" / i: "+h),
console.log("Data TO BE written: "+k),console.log("Data READ BACK: "+l),!1;h+=e;f+=e;f%=256;h<g&&(0==f&&b++,this.setMemoryBank(b),this.setMemoryStartAddress(f))}return!0};b.prototype.readMemoryBlock=function(a,b,f){this.setMemoryBank(b);this.setMemoryStartAddress(f);var e,g=new Uint8Array(a);for(i=0;i<a;)e=d.DMP_MEMORY_CHUNK_SIZE,i+e>a&&(e=a-i),e>256-f&&(e=256-f),g.set(this.readBytes(111,e),i),i+=e,f+=e,f%=256,i<a&&(0==f&&b++,this.setMemoryBank(b),this.setMemoryStartAddress(f))};b.prototype.setSlaveAddress=
function(a,b){3<a||this.writeBytes(37+3*a,b)};b.prototype.setI2CMasterModeEnabled=function(a){this.writeBit(106,d.USERCTRL_I2C_MST_EN_BIT,a)};b.prototype.resetI2CMaster=function(){this.writeBit(106,d.USERCTRL_I2C_MST_RESET_BIT,!0)};b.prototype.getOTPBankValid=function(){return this.readBit(0,d.TC_OTP_BNK_VLD_BIT)};b.prototype.setOTPBankValid=function(a){this.writeBit(0,d.TC_OTP_BNK_VLD_BIT,a)};b.prototype.getXGyroOffsetTC=function(){return this.readBits(0,d.TC_OFFSET_BIT,d.TC_OFFSET_LENGTH)};b.prototype.setXGyroOffsetTC=
function(a){this.writeBits(0,d.TC_OFFSET_BIT,d.TC_OFFSET_LENGTH,a)};b.prototype.getYGyroOffsetTC=function(){return this.readBits(1,d.TC_OFFSET_BIT,d.TC_OFFSET_LENGTH)};b.prototype.setYGyroOffsetTC=function(a){this.writeBits(1,d.TC_OFFSET_BIT,d.TC_OFFSET_LENGTH,a)};b.prototype.getZGyroOffsetTC=function(){return this.readBits(2,d.TC_OFFSET_BIT,d.TC_OFFSET_LENGTH)};b.prototype.setZGyroOffsetTC=function(a){this.writeBits(2,d.TC_OFFSET_BIT,d.TC_OFFSET_LENGTH,a)}