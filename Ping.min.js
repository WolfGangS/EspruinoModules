var k=require("net");exports.ping=function(a,l){function c(b,a){var d=getTime(),g=k.connect({host:b.address,port:b.port},function(){var c=1E3*(getTime()-d);g.end();f++;data.push(c);clearTimeout(m);h(b,a)}),m=setTimeout(function(){g.end();f++;data.push(b.timeout+1);h(b,a)},b.timeout)}function h(a,e){if(f<a.attempts)c(a,e);else{var d=data.reduce(function(a,b){return a+b})/data.length;d>a.timeout?e(Error("Timeout"),void 0):e(void 0,{address:a.address,port:a.port,attempts:a.attempts,avg:d,
max:Math.max.apply(null,data),min:Math.min.apply(null,data),raw:data})}}"object"!=typeof a&&(a={});a.address=a.address||"localhost";a.port=a.port||80;a.attempts=a.attempts||5;a.timeout=a.timeout||5E3;var f=0;data=[];c(a,l)}