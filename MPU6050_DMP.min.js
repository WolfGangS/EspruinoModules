function b(a,d){this.mpu=a;this.fifoRate=d;this.initialize()}exports.create=function(a,d){return new b(a,d)};b.prototype.getData=function(){var a=this.getIntStatus(),d=this.getFIFOCount();if(a&16||1024==d)this.resetFIFO(),console.log("FIFO overflow!");else{if(a&2){for(;42>d;)d=b.getFIFOCount();a=this.getFIFOBytes(42);return{qw:signedInt(a[0],a[1])/16384,qx:signedInt(a[4],a[5])/16384,qy:signedInt(a[8],a[9])/16384,qz:signedInt(a[12],a[13])/16384,gyrox:signedInt(a[16],a[17]),gyroy:signedInt(a[20],
a[21]),gyroz:signedInt(a[24],a[25]),accelx:signedInt(a[28],a[29]),accely:signedInt(a[32],a[33]),accelz:signedInt(a[36],a[37])}}console.log("DMP Data NOT ready")}};signedInt=function(a,d){var b=a<<8|d;32768<b&&(b-=65536);return b};b.prototype.getGravity=function(a){return{x:2*(a.qx*a.qz-a.qw*a.qy),y:2*(a.qw*a.qx+a.qy*a.qz),z:a.qw*a.qw-a.qx*a.qx-a.qy*a.qy+a.qz*a.qz}};b.prototype.getYawPitchRoll=function(a){var d=this.getGravity(a);return{yaw:Math.atan2(2*a.qx*a.qy-2*a.qw*a.qz,2*a.qw*a.qw+2*a.qx*a.qx-
1),pitch:Math.atan(d.x/Math.sqrt(d.y*d.y+d.z*d.z)),roll:Math.atan(d.y/Math.sqrt(d.x*d.x+d.z*d.z))}};b.prototype.getEuler=function(a){return{psi:Math.atan2(2*a.qx*a.qy-2*a.qw*a.qz,2*a.qw*a.qw+2*a.qx*a.qx-1),theta:-Math.asin(2*a.qx*a.qz+2*a.qw*a.qy),phi:Math.atan2(2*a.qy*a.qz-2*a.qw*a.qx,2*a.qw*a.qw+2*a.qz*a.qz-1)}};var k=new Uint8Array([251,0,0,62,0,11,0,54,0,1,0,2,0,3,0,0,0,101,0,84,255,239,0,0,250,128,0,11,18,130,0,1,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,0,0,255,255,69,129,255,255,250,114,0,0,0,0,
0,0,3,232,0,0,0,1,0,1,127,255,255,254,128,1,0,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,3,48,64,0,0,0,2,202,227,9,62,128,0,0,32,0,0,0,0,0,0,0,64,0,0,0,96,0,0,0,65,255,0,0,0,0,11,42,0,0,22,85,0,0,33,130,253,135,38,80,253,128,0,0,0,31,0,0,0,5,128,0,0,0,0,0,0,1,0,0,0,2,0,0,0,3,0,0,64,0,0,0,0,0,4,111,0,2,101,50,0,0,94,192,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,251,140,111,93,253,93,8,217,0,124,115,59,0,108,18,204,50,0,19,157,50,0,208,214,50,0,8,0,64,0,1,244,255,230,128,121,2,0,0,0,0,0,208,214,0,0,39,16,251,0,0,0,
64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,250,54,255,188,48,142,0,5,251,240,255,217,91,200,255,208,154,190,0,0,16,169,255,244,30,178,0,206,187,247,0,0,0,1,0,0,0,4,0,2,0,2,2,0,0,12,255,194,128,0,0,1,128,0,0,207,128,0,64,0,0,0,0,0,0,1,0,0,0,0,0,0,6,0,0,0,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,63,104,182,121,53,40,188,198,126,209,108,128,0,0,0,64,0,0,0,0,0,178,106,0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,240,0,0,0,48,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,37,77,0,47,112,109,0,0,5,174,0,12,2,208,0,0,0,0,0,101,0,84,255,239,0,0,0,0,0,0,0,0,1,0,0,68,0,0,0,0,12,0,0,0,1,0,0,0,0,0,0,101,0,0,0,84,0,0,255,239,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
64,0,0,0,0,27,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,216,220,186,162,241,222,178,184,180,168,129,145,247,74,144,127,145,106,243,249,219,168,249,176,186,160,128,242,206,129,243,194,241,193,242,195,243,204,162,178,128,241,198,216,128,186,167,223,223,223,242,167,195,203,197,182,240,135,162,148,36,72,112,60,149,64,104,52,88,155,120,162,241,131,146,45,85,125,216,177,180,184,161,208,145,128,242,112,243,112,242,124,128,
168,241,1,176,152,135,217,67,216,134,201,136,186,161,242,14,184,151,128,241,169,223,223,223,170,223,223,223,242,170,197,205,199,169,12,201,44,151,151,151,151,241,169,137,38,70,102,176,180,186,128,172,222,242,202,241,178,140,2,169,182,152,0,137,14,22,30,184,169,180,153,44,84,124,176,138,168,150,54,86,118,241,185,175,180,176,131,192,184,168,151,17,177,143,152,185,175,240,36,8,68,16,100,24,241,163,41,85,125,175,131,181,147,175,240,0,40,80,241,163,134,159,97,166,218,222,223,217,250,163,134,150,219,49,
166,217,248,223,186,166,143,194,197,199,178,140,193,184,162,223,223,223,163,223,223,223,216,216,241,184,168,178,134,180,152,13,53,93,184,170,152,176,135,45,53,61,178,182,186,175,140,150,25,143,159,167,14,22,30,180,154,184,170,135,44,84,124,185,163,222,223,223,163,177,128,242,196,205,201,241,184,169,180,153,131,13,53,93,137,185,163,45,85,125,181,147,163,14,22,30,169,44,84,124,184,180,176,241,151,131,168,17,132,165,9,152,163,131,240,218,36,8,68,16,100,24,216,241,165,41,85,125,165,133,149,2,26,46,58,
86,90,64,72,249,243,163,217,248,240,152,131,36,8,68,16,100,24,151,130,168,241,17,240,152,162,36,8,68,16,100,24,218,243,222,216,131,165,148,1,217,163,2,241,162,195,197,199,216,241,132,146,162,77,218,42,216,72,105,217,42,216,104,85,218,50,216,80,113,217,50,216,112,93,218,58,216,88,121,217,58,216,120,147,163,77,218,42,216,72,105,217,42,216,104,85,218,50,216,80,113,217,50,216,112,93,218,58,216,88,121,217,58,216,120,168,138,154,240,40,80,120,158,243,136,24,241,159,29,152,168,217,8,216,200,159,18,158,243,
21,168,218,18,16,216,241,175,200,151,135,52,181,185,148,164,33,243,217,34,216,242,45,243,217,42,216,242,53,243,217,50,216,129,164,96,96,97,217,97,216,108,104,105,217,105,216,116,112,113,217,113,216,177,163,132,25,61,93,163,131,26,62,94,147,16,48,129,16,17,184,176,175,143,148,242,218,62,216,180,154,168,135,41,218,248,216,135,154,53,218,248,216,135,154,61,218,248,216,177,185,164,152,133,2,46,86,165,129,0,12,20,163,151,176,138,241,45,217,40,216,77,217,72,216,109,217,104,216,177,132,13,218,14,216,163,
41,131,218,44,14,216,163,132,73,131,218,44,76,14,216,184,176,168,138,154,245,32,170,218,223,216,168,64,170,208,218,222,216,168,96,170,218,208,223,216,241,151,134,168,49,155,6,153,7,171,151,40,136,155,240,12,32,20,64,184,176,180,168,140,156,240,4,40,81,121,29,48,20,56,178,130,171,208,152,44,80,80,120,120,155,241,26,176,240,138,156,168,41,81,121,139,41,81,121,138,36,112,89,139,32,88,113,138,68,105,56,139,57,64,104,138,100,72,49,139,48,73,96,165,136,32,9,113,88,68,104,17,57,100,73,48,25,241,172,0,44,
84,124,240,140,168,4,40,80,120,241,136,151,38,168,89,152,172,140,2,38,70,102,240,137,156,168,41,81,121,36,112,89,68,105,56,100,72,49,169,136,9,32,89,112,171,17,56,64,105,168,25,49,72,96,140,168,60,65,92,32,124,0,241,135,152,25,134,168,110,118,126,169,153,136,45,85,125,158,185,163,138,34,138,110,138,86,138,94,159,177,131,6,38,70,102,14,46,78,110,157,184,173,0,44,84,124,242,177,140,180,153,185,163,45,85,125,129,145,172,56,173,58,181,131,145,172,45,217,40,216,77,217,72,216,109,217,104,216,140,157,174,
41,217,4,174,216,81,217,4,174,216,121,217,4,216,129,243,157,173,0,141,174,25,129,173,217,1,216,242,174,218,38,216,142,145,41,131,167,217,173,173,173,173,243,42,216,216,241,176,172,137,145,62,94,118,243,172,46,46,241,177,140,90,156,172,44,40,40,40,156,172,48,24,168,152,129,40,52,60,151,36,167,40,52,60,156,36,242,176,137,172,145,44,76,108,138,155,45,217,216,216,81,217,216,216,121,217,216,216,241,158,136,163,49,218,216,216,145,45,217,40,216,77,217,72,216,109,217,104,216,177,131,147,53,61,128,37,218,
216,216,133,105,218,216,216,180,147,129,163,40,52,60,243,171,139,248,163,145,182,9,180,217,171,222,250,176,135,156,185,163,221,241,163,163,163,163,149,241,163,163,163,157,241,163,163,163,163,242,163,180,144,128,242,163,163,163,163,163,163,163,163,163,163,178,163,163,163,163,163,163,176,135,181,153,241,163,163,163,152,241,163,163,163,163,151,163,163,163,163,243,155,163,163,220,185,167,241,38,38,38,216,216,255]),l=new Uint8Array([3,123,3,76,205,108,3,171,3,54,86,118,0,104,4,2,203,71,162,2,24,4,0,5,
139,193,1,12,4,0,0,0,0,3,127,6,12,201,44,151,151,151,3,137,3,38,70,102,0,108,2,32,0,2,64,4,0,0,0,0,2,68,4,0,0,0,0,2,72,4,0,0,0,0,2,76,4,0,0,0,0,2,80,4,0,0,0,0,2,84,4,0,0,0,0,2,88,4,0,0,0,0,2,92,4,0,0,0,0,2,188,4,0,0,0,0,1,236,4,0,0,64,0,3,127,6,12,201,44,151,151,151,4,2,3,13,53,93,4,9,4,135,45,53,61,0,163,1,0,0,0,0,1,7,134,1,254,7,65,5,241,32,40,48,56,7,126,1,48,7,70,1,154,7,71,4,241,40,48,56,7,108,4,241,40,48,56,2,22,2,0,0]),c=[[1,178,[255,255]],[1,144,[9,35,161,53]],[1,106,[6,0]],[1,96,[0,0,0,0,
0,0,0,0]],[0,96,[64,0,0,0]],[1,98,[0,0]],[0,96,[0,64,0,0]]];b.prototype.writeDMPConfigurationSet=function(a){var d=a.length;a[d-1]=this.fifoRate;for(var b,c,f,e=0;e<d;)if(b=a[e++],c=a[e++],f=a[e++],0<f){if(!this.mpu.writeMemoryBlock(a.slice(e,e+f),b,c))return console.log("Can't write to MSP6050 memory block"),!1;e+=f}else if(b=a[e++],1==b)this.mpu.writeBytes(56,50);else return console.log("Unknowns special command: "+b),!1;return!0};b.prototype.setIntEnabled=function(a){this.mpu.writeBytes(56,a)};
b.prototype.setSampleRate=function(a){this.mpu.writeBytes(25,a)};b.prototype.setExternalFrameSync=function(a){this.mpu.writeBits(26,5,3,a)};b.prototype.setDLPFMode=function(a){this.mpu.writeBits(26,2,3,a)};b.prototype.setDMPConfig1=function(a){this.mpu.writeBytes(112,a)};b.prototype.setDMPConfig2=function(a){this.mpu.writeBytes(113,a)};b.prototype.setFIFOEnabled=function(a){this.mpu.writeBit(106,6,a)};b.prototype.resetFIFO=function(){this.mpu.writeBit(106,2,!0)};b.prototype.getFIFOCount=function(){var a=
this.mpu.readBytes(114,2);return a[0]<<8|a[1]};b.prototype.getFIFOBytes=function(a){return 1>a?new Uint8Array([]):this.mpu.readBytes(116,a)};b.prototype.setMotionDetectionThreshold=function(a){this.mpu.writeBytes(31,a)};b.prototype.setZeroMotionDetectionThreshold=function(a){this.mpu.writeBytes(33,a)};b.prototype.setMotionDetectionDuration=function(a){this.mpu.writeBytes(32,a)};b.prototype.setZeroMotionDetectionDuration=function(a){this.mpu.writeBytes(34,a)};b.prototype.setDMPEnabled=function(a){this.mpu.writeBit(106,
7,a)};b.prototype.resetDMP=function(){this.mpu.writeBit(106,3,!0)};b.prototype.getIntStatus=function(){return this.mpu.readBytes(58,1)[0]};b.prototype.initialize=function(){console.log("Resetting MPU6050...");this.mpu.reset();setTimeout(initialize1,30,this)};initialize1=function(a){a.mpu.setSleepEnabled(!1);a.mpu.setMemoryBank(0,!1,!1);console.log("OTP bank is "+(a.mpu.getOTPBankValid()?"valid!":"INvalid!"));var b=a.mpu.getXGyroOffsetTC(),c=a.mpu.getYGyroOffsetTC(),g=a.mpu.getZGyroOffsetTC();a.mpu.setSlaveAddress(0,
127);a.mpu.setI2CMasterModeEnabled(!1);a.mpu.setSlaveAddress(0,104);a.mpu.resetI2CMaster();setTimeout(initialize2,20,a,b,c,g)};initialize2=function(a,b,h,g){if(a.mpu.writeMemoryBlock(k,0,0)){console.log("Success! DMP code written and verified.");if(a.writeDMPConfigurationSet(l)){console.log("Success! DMP configuration written and verified.");a.mpu.setClockSource(3);a.setIntEnabled(18);a.setSampleRate(4);a.setExternalFrameSync(1);a.setDLPFMode(3);a.mpu.setFullScaleGyroRange(3);a.setDMPConfig1(3);a.setDMPConfig2(0);
a.mpu.setOTPBankValid(!1);a.mpu.setXGyroOffsetTC(b);a.mpu.setYGyroOffsetTC(h);a.mpu.setZGyroOffsetTC(g);a.mpu.writeMemoryBlock(c[0][2],c[0][0],c[0][1]);a.mpu.writeMemoryBlock(c[1][2],c[1][0],c[1][1]);a.resetFIFO();a.getFIFOBytes(a.getFIFOCount());a.setMotionDetectionThreshold(2);a.setZeroMotionDetectionThreshold(156);a.setMotionDetectionDuration(80);a.setZeroMotionDetectionDuration(0);a.resetFIFO();a.setFIFOEnabled(!0);a.setDMPEnabled(!0);a.resetDMP();a.mpu.writeMemoryBlock(c[2][2],c[2][0],c[2][1]);
a.mpu.writeMemoryBlock(c[3][2],c[3][0],c[3][1]);for(a.mpu.writeMemoryBlock(c[4][2],c[4][0],c[4][1]);3>(b=a.getFIFOCount()););console.log("FIFO count: "+b+" Data: "+a.getFIFOBytes(b));console.log("IntStatus: "+a.getIntStatus());for(a.mpu.readMemoryBlock(2,c[5][0],c[5][1]);3>(b=a.getFIFOCount()););console.log("FIFO count: "+b+" Data: "+a.getFIFOBytes(b));console.log("IntStatus: "+a.getIntStatus());a.mpu.writeMemoryBlock(c[6][2],c[6][0],c[6][1]);a.resetFIFO();console.log("DMP is good to go! IntStatus: "+
a.getIntStatus())}else return 2;return 0}return 1}