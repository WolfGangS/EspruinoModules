function c(a,b){this.datapin=b;this.clockpin=a;this.timeout=this.ack=0;this.lastTemperature;this.lastHumidity;this.lastDewPoint}c.prototype.Delay=function(a){for(var b=Date().getTime();!(Date().getTime()-b>a););};c.prototype.clockTick=function(a){digitalWrite(this.clockpin,a);this.Delay(1)};c.prototype.sendCommand=function(a){digitalWrite(this.clockpin,0);digitalWrite(this.datapin,1);this.clockTick(1);digitalWrite(this.datapin,0);this.clockTick(0);this.clockTick(1);digitalWrite(this.datapin,
1);this.clockTick(0);for(var b=0;8>b;b++)digitalWrite(this.datapin,a&1<<7-b),this.clockTick(1),this.clockTick(0);this.clockTick(1);this.ack=digitalRead(this.datapin);this.clockTick(0);this.ack=digitalRead(this.datapin)};c.prototype.shiftIn=function(a){for(var b=0,c=0;c<a;c++)this.clockTick(1),b=2*b+digitalRead(this.datapin),this.clockTick(0);return b};c.prototype.getData=function(){var a=this.shiftIn(8),a=256*a;digitalWrite(this.datapin,1);this.Delay(1);digitalWrite(this.datapin,0);this.clockTick(1);
this.clockTick(0);return a|=this.shiftIn(8)};c.prototype.skipCrc=function(){digitalWrite(this.datapin,1);this.clockTick(1);this.clockTick(0)};c.prototype.resetConnection=function(){digitalWrite(this.datapin,1);for(var a=0;10>a;a++)this.clockTick(1),this.clockTick(0)};c.prototype.readTemperature=function(){this.sendCommand(3);for(this.timeout=0;1==this.ack;){this.ack=digitalRead(this.datapin);this.timeout++;if(100<=this.timeout)break;this.Delay(10)}rawtemp=this.getData();this.skipCrc();return this.lastTemperature=
.01*rawtemp+-39.65};c.prototype.readCompensatedHumidity=function(){this.lastTemperature=this.readTemperature();this.sendCommand(5);for(this.timeout=0;1==this.ack;){this.ack=digitalRead(this.datapin);this.timeout++;if(100<=this.timeout)break;this.Delay(10)}var a=this.getData();this.skipCrc();this.lastHumidity=-2.0468+.0367*a+-1.5955E-6*a*a;return this.lastHumidity=(this.lastTemperature-25)*(.01+8E-5*a)+this.lastHumidity};c.prototype.readHumidity=function(){this.sendCommand(5);for(this.timeout=0;1==
this.ack;){this.ack=digitalRead(this.datapin);this.timeout++;if(100<=this.timeout)break;this.Delay(10)}var a=this.getData();this.skipCrc();return this.lastHumidity=-2.0468+.0367*a+-1.5955E-6*a*a};c.prototype.calculateDewPoint=function(a,b){0<a?(tn=243.12,m=17.62):(tn=272.62,m=22.46);return this.lastDewPoint=tn*(Math.log(b/100)+m*a/(tn+a))/(m-Math.log(b/100)-m*a/(tn+a))};exports.connect=function(a,b){return new c(a,b)}